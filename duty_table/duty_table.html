<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è”¡ä¿Šæ¦•æ˜¥å¤©è¨ºæ‰€é–€è¨ºæ™‚åˆ»è¡¨ç·¨è¼¯å™¨</title>
    <style>
        /* ç‰ˆé¢è¨­è¨ˆ */
        body {
            font-family: 'Noto Sans TC', sans-serif ;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            overflow-x: auto;
            line-height: 1.43;
        }
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            border: 2px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            background-color: white;
        }
        /* å·¦é‚Šå³æ™‚é¡¯ç¤º */
        .schedule-preview {
            flex: 1;
            position: relative;
            max-width: 780px;
            background-image: url('é–€è¨ºæ™‚åˆ»è¡¨ç¯„æœ¬.png'); /* æ›¿æ›æˆæ‚¨çš„åœ–ç‰‡ */
            background-size: contain; /* ä½¿ç”¨ contain ä¿æŒåŸæ¯”ä¾‹ */
            background-repeat: no-repeat; /* é˜²æ­¢åœ–ç‰‡é‡è¤‡ */
            background-position: center; /* åœ–ç‰‡ç½®ä¸­ */
            width: 100%; /* è¨­ç½®ç‚º 100% å¯¬åº¦ï¼Œä»¥é©æ‡‰åœ–ç‰‡ */
            height: auto; /* é«˜åº¦è‡ªå‹• */
        }
        /* å³é‚Šç·¨è¼¯æ–¹å¡Š */
        .shift-selection {
            flex: 1;
            padding: 25px;
            max-width: 500px;
        }
        /* ç¾åŒ–æ¨™é¡Œå’Œé¸å–æ–¹å¡Š */
        .shift-selection h2 {
            font-size: 1.5em;
            color: #333;
            border-bottom: 2px solid #0073e6;
            padding-bottom: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        .day-container h3 {
            color: #0073e6;
            margin: 0;
            /*padding-top: 10px;*/
        }
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        label {
            font-size: 14px;
            color: #555;
            margin-right: 10px;
        }
        /* è¨­å®šé¡¯ç¤ºä½ç½® */
        .shift-display {
            position: absolute;
            font-size: 40px; /*40px*/
            font-weight: bold;
            color: black;
            /*border: 1px solid red;  æ·»åŠ ç´…è‰²é‚Šæ¡†è¼”åŠ©å®šä½ 
            background-color: rgba(255, 0, 0, 0.1); åŠé€æ˜ç´…è‰²èƒŒæ™¯ */
        }
        .action-buttons {
            display: flex;
            gap: 30px;
            justify-content: center;
        }
        button {
            background-color: #0073e6;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background-color: #005bb5;
        }

        /* å„ç¨®æŒ‰éˆ•é¡è‰² */
        .btn-primary {
            background-color: #0073e6;
        }
        .btn-primary:hover {
            background-color: #005bb5;
        }

        .btn-warning {
            background-color: #ff9800;
        }
        .btn-warning:hover {
            background-color: #e68900;
        }

        .btn-danger {
            background-color: #f44336;
        }
        .btn-danger:hover {
            background-color: #d32f2f;
        }

        .btn-success {
            background-color: #4CAF50;
        }
        .btn-success:hover {
            background-color: #388E3C;
        }
    </style>
    <!-- NotoSans TCå­—é«”  -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400&display=swap" rel="stylesheet">
</head>
<body>

<div class="container">
    <!-- å·¦é‚Šå³æ™‚é¡¯ç¤ºå€ -->
    <div class="schedule-preview" id="schedule-preview">
        <div class="shift-display" id="mon-morning" style="top: 12.2%; left: 26.2%;"></div>
        <div class="shift-display" id="mon-afternoon" style="top: 12.2%; left: 50.7%;"></div>
        <div class="shift-display" id="mon-evening" style="top: 12.2%; left: 76.2%;"></div>
    
        <div class="shift-display" id="tue-morning" style="top: 24.3%; left: 26.2%;"></div>
        <div class="shift-display" id="tue-afternoon" style="top: 24.3%; left: 50.7%;"></div>
        <div class="shift-display" id="tue-evening" style="top: 24.3%; left: 76.2%;"></div>
    
        <div class="shift-display" id="wed-morning" style="top: 36.4%; left: 26.2%;"></div>
        <div class="shift-display" id="wed-afternoon" style="top: 36.4%; left: 50.7%;"></div>
        <div class="shift-display" id="wed-evening" style="top: 36.4%; left: 76.2%;"></div>
    
        <div class="shift-display" id="thu-morning" style="top: 48.7%; left: 26.2%;"></div>
        <div class="shift-display" id="thu-afternoon" style="top: 48.7%; left: 50.7%;"></div>
        <div class="shift-display" id="thu-evening" style="top: 48.7%; left: 76.2%;"></div>
    
        <div class="shift-display" id="fri-morning" style="top: 61.2%; left: 26.2%;"></div>
        <div class="shift-display" id="fri-afternoon" style="top: 61.2%; left: 50.7%;"></div>
        <div class="shift-display" id="fri-evening" style="top: 61.2%; left: 76.2%;"></div>
    
        <div class="shift-display" id="sat-morning" style="top: 73.2%; left: 26.2%;"></div>
        <div class="shift-display" id="sat-afternoon" style="top: 73.2%; left: 50.7%;"></div>
        <div class="shift-display" id="sat-evening" style="top: 73.2%; left: 76.2%;"></div>
    
        <div class="shift-display" id="sun-morning" style="top: 85.2%; left: 26.2%;"></div>
        <div class="shift-display" id="sun-afternoon" style="top: 85.2%; left: 50.7%;"></div>
        <div class="shift-display" id="sun-evening" style="top: 85.2%; left: 76.2%;"></div>
    </div>

    <!-- å³é‚Šç·¨è¼¯é¸å–æ–¹å¡Šå€ -->
    <div class="shift-selection">
        <h2>
            <a href="#" onclick="alert('2025.03.11 æ›´æ–°é è¨­é–€è¨ºæ™‚åˆ»è¡¨åŠæ–°å¢è‡ªè¨‚æ”¯æ´é†«å¸«è¼¸å…¥æ¬„')" style="text-decoration: none; color: inherit;">
                è”¡ä¿Šæ¦•æ˜¥å¤©è¨ºæ‰€é–€è¨ºæ™‚åˆ»è¡¨ç·¨è¼¯å™¨
            </a>
        </h2>
        <!-- é€±ä¸€é¸å–æ–¹å¡Š -->
        <div class="day-container" id="mon">
            <h3>é€±ä¸€</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="mon-morning-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="mon-morning-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="mon-morning-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="mon-morning-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="mon-morning-custom-checkbox" value="">
                <input type="text" id="mon-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="mon-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="mon-afternoon-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="mon-afternoon-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="mon-afternoon-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="mon-afternoon-custom-checkbox" value="">
                <input type="text" id="mon-afternoon-custom" style="width: 55px;" value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="mon-evening-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦•
                <input type="checkbox" id="mon-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="mon-evening-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="mon-evening-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="mon-evening-custom-checkbox" value="">
                <input type="text" id="mon-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±äºŒ -->
        <div class="day-container" id="tue">
            <h3>é€±äºŒ</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="tue-morning-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="tue-morning-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="tue-morning-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="tue-morning-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="tue-morning-custom-checkbox" value="">
                <input type="text" id="tue-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="tue-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="tue-afternoon-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="tue-afternoon-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="tue-afternoon-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="tue-afternoon-custom-checkbox" value="">
                <input type="text" id="tue-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="tue-evening-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="tue-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="tue-evening-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="tue-evening-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="tue-evening-custom-checkbox" value="">
                <input type="text" id="tue-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±ä¸‰ -->
        <div class="day-container" id="wed">
            <h3>é€±ä¸‰</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="wed-morning-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="wed-morning-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="wed-morning-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="wed-morning-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="wed-morning-custom-checkbox" value="">
                <input type="text" id="wed-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="wed-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="wed-afternoon-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="wed-afternoon-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="wed-afternoon-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="wed-afternoon-custom-checkbox" value="">
                <input type="text" id="wed-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="wed-evening-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦•
                <input type="checkbox" id="wed-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="wed-evening-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="wed-evening-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="wed-evening-custom-checkbox" value="">
                <input type="text" id="wed-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±å›› -->
        <div class="day-container" id="thu">
            <h3>é€±å››</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="thu-morning-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="thu-morning-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="thu-morning-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="thu-morning-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="thu-morning-custom-checkbox" value="">
                <input type="text" id="thu-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="thu-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="thu-afternoon-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="thu-afternoon-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="thu-afternoon-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="thu-afternoon-custom-checkbox" value="">
                <input type="text" id="thu-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="thu-evening-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="thu-evening-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="thu-evening-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="thu-evening-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="thu-evening-custom-checkbox" value="">
                <input type="text" id="thu-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±äº” -->
        <div class="day-container" id="fri">
            <h3>é€±äº”</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="fri-morning-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="fri-morning-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="fri-morning-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="fri-morning-D" value="é™³é€²å„’" checked> é™³é€²å„’
                <input type="checkbox" id="fri-morning-custom-checkbox" value="">
                <input type="text" id="fri-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="fri-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="fri-afternoon-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="fri-afternoon-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="fri-afternoon-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="fri-afternoon-custom-checkbox" value="">
                <input type="text" id="fri-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="fri-evening-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦•
                <input type="checkbox" id="fri-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="fri-evening-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="fri-evening-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="fri-evening-custom-checkbox" value="">
                <input type="text" id="fri-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±å…­ -->
        <div class="day-container" id="sat">
            <h3>é€±å…­</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="sat-morning-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="sat-morning-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="sat-morning-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="sat-morning-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sat-morning-custom-checkbox" value="">
                <input type="text" id="sat-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="sat-afternoon-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="sat-afternoon-B" value="é™³æ€å€«" checked> é™³æ€å€«
                <input type="checkbox" id="sat-afternoon-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="sat-afternoon-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sat-afternoon-custom-checkbox" value="">
                <input type="text" id="sat-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="sat-evening-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦•
                <input type="checkbox" id="sat-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="sat-evening-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="sat-evening-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sat-evening-custom-checkbox" value="">
                <input type="text" id="sat-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <!-- é€±æ—¥ -->
        <div class="day-container" id="sun">
            <h3>é€±æ—¥</h3>
            <div class="checkbox-group">
                <label>æ—©è¨º</label>
                <input type="checkbox" id="sun-morning-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦• 
                <input type="checkbox" id="sun-morning-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="sun-morning-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="sun-morning-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sun-morning-custom-checkbox" value="">
                <input type="text" id="sun-morning-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>åˆè¨º</label>
                <input type="checkbox" id="sun-afternoon-A" value="è”¡ä¿Šæ¦•" checked> è”¡ä¿Šæ¦•
                <input type="checkbox" id="sun-afternoon-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="sun-afternoon-C" value="è©¹é›…åµ"> è©¹é›…åµ
                <input type="checkbox" id="sun-afternoon-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sun-afternoon-custom-checkbox" value="">
                <input type="text" id="sun-afternoon-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
            <div class="checkbox-group">
                <label>æ™šè¨º</label>
                <input type="checkbox" id="sun-evening-A" value="è”¡ä¿Šæ¦•"> è”¡ä¿Šæ¦•
                <input type="checkbox" id="sun-evening-B" value="é™³æ€å€«"> é™³æ€å€«
                <input type="checkbox" id="sun-evening-C" value="è©¹é›…åµ" checked> è©¹é›…åµ
                <input type="checkbox" id="sun-evening-D" value="é™³é€²å„’"> é™³é€²å„’
                <input type="checkbox" id="sun-evening-custom-checkbox" value="">
                <input type="text" id="sun-evening-custom" style="width: 55px;"  value="" placeholder="æ”¯æ´é†«å¸«">
            </div>
        </div>
        <br>
        <div class="action-buttons">
            <button class="btn-primary" onclick="generateSchedule()">ç”Ÿæˆ</button>
            <button class="btn-warning" onclick="resetForm()">é‡è¨­</button>
            <button class="btn-danger" onclick="clearForm()">æ¸…ç©º</button>
            <button class="btn-success" onclick="downloadImage()">ä¸‹è¼‰</button>
        </div>
    </div>
</div>

<script>
    function generateSchedule() {
        const days = ["mon", "tue", "wed", "thu", "fri", "sat", "sun"];
        const times = ["morning", "afternoon", "evening"];
        /*
        days.forEach(day => {
            times.forEach(time => {
                const checkboxes = document.querySelectorAll(`#${day}-${time}-A, #${day}-${time}-B, #${day}-${time}-C, #${day}-${time}-D, #${day}-${time}-custom-checkbox`);
                const selectedText = Array.from(checkboxes).filter(cb => cb.checked).map(cb => cb.value).join("\n");
                document.getElementById(`${day}-${time}`).innerText = selectedText;
            });
        });
        */
        days.forEach(day => {
            times.forEach(time => {
                const checkboxes = document.querySelectorAll(`#${day}-${time}-A, #${day}-${time}-B, #${day}-${time}-C, #${day}-${time}-D`);
                const customInput = document.getElementById(`${day}-${time}-custom`);
                const customCheckbox = document.getElementById(`${day}-${time}-custom-checkbox`);
                const displayElement = document.getElementById(`${day}-${time}`);

                // å–å¾—é¸å–çš„é†«å¸«åç¨±
                let selectedDoctors = Array.from(checkboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.value);

                // æª¢æŸ¥æ˜¯å¦å‹¾é¸äº† "è‡ªè¨‚é†«å¸«"
                if (customCheckbox.checked && customInput.value.trim().length >= 2) {
                    let customName = customInput.value.trim();

                    // ğŸ”¹ å…©å€‹å­— â†’ è‡ªå‹•æ’å…¥å…¨å½¢ç©ºç™½
                    if (customName.length === 2) {
                        customName = customName[0] + "\u3000" + customName[1];
                    }

                    // ğŸ”¹ é™åˆ¶æœ€å¤š 3 å€‹å­—
                    if (customName.length > 3) {
                        customName = customName.slice(0, 3);
                    }

                    selectedDoctors.push(customName); // åŠ å…¥æ”¯æ´é†«å¸«
                }

                // é¡¯ç¤ºé¸å–çš„é†«å¸«åç¨±ï¼ˆæ›è¡Œé¡¯ç¤ºï¼‰
                displayElement.innerText = selectedDoctors.join("\n");
            });
        });
    }

    function downloadImage() {
        const container = document.getElementById("schedule-preview");

        // æš«æ™‚å›ºå®šå®¹å™¨å¤§å°
        container.style.width = "780px"; // å‡è¨­åœ–ç‰‡å¯¬åº¦ç‚º 800px
        container.style.height = "1314px";

        html2canvas(container, { 
            useCORS: true,
            scale: 2 // æé«˜ scale å€¼ä»¥å¢åŠ è§£æåº¦ï¼Œé¿å…è·‘ç‰ˆ
        }).then(canvas => {
            // æ¢å¾©å®¹å™¨å¤§å°
            container.style.width = "";
            container.style.height = "";

            // æ—¥æœŸæ™‚é–“å­—ä¸²
            const timestamp = new Date().toISOString().slice(0, 16).replace("T", "-").replace(/:/g, "");
            console.log(timestamp);
            const link = document.createElement("a");
            link.download = `${timestamp}_è¨ºæ‰€é–€è¨ºæ™‚åˆ»è¡¨.png`;
            link.href = canvas.toDataURL("image/png");
            link.click();
        }).catch(error => {
            console.error("åœ–ç‰‡ä¸‹è¼‰å¤±æ•—:", error);
        });
    }

    document.addEventListener("DOMContentLoaded", function() {
        generateSchedule();
        // å®šç¾©ä¸€é€±çš„æ¯ä¸€å¤©å’Œæ™‚æ®µ
        const days = ["mon", "tue", "wed", "thu", "fri", "sat", "sun"];
        const times = ["morning", "afternoon", "evening"];

        days.forEach(day => {
            times.forEach(time => {
                const checkboxes = document.querySelectorAll(`#${day}-${time}-A, #${day}-${time}-B, #${day}-${time}-C, #${day}-${time}-D`);
                const customInput = document.getElementById(`${day}-${time}-custom`);
                const customCheckbox = document.getElementById(`${day}-${time}-custom-checkbox`);

                // åˆå§‹ç‹€æ…‹ï¼šæœªå‹¾é¸æ™‚ç¦ç”¨è‡ªè¨‚è¼¸å…¥æ¡†
                customInput.disabled = true;
                // ç¢ºä¿ checkbox é è¨­ç‚ºç©ºå€¼
                customCheckbox.value = "";

                // ç•¶ custom Checkbox è¢«é»é¸æ™‚ï¼Œå…ˆæª¢æŸ¥è©²æ™‚æ®µæ˜¯å¦å·²æ»¿2ä½
                customCheckbox.addEventListener("change", function() {
                    const checkedOptions = Array.from(checkboxes).filter(cb => cb.checked).length;

                    if (this.checked) {
                        if (checkedOptions >= 2) {
                            alert("ä¸€å€‹ç¯€æ¬¡æœ€å¤šåªèƒ½é¸æ“‡å…©ä½é†«å¸«ï¼");
                            this.checked = false;
                            return;
                        }
                        customInput.disabled = false; // å•Ÿç”¨è¼¸å…¥æ¡†
                        customInput.focus(); // è‡ªå‹•èšç„¦è¼¸å…¥æ¡†
                    } else {
                        customInput.disabled = true; // å–æ¶ˆå‹¾é¸æ™‚ï¼Œç¦ç”¨è¼¸å…¥æ¡†
                        customInput.value = "";     // æ¸…ç©ºè¼¸å…¥å…§å®¹
                        customCheckbox.value = "";  // ç¢ºä¿ checkbox é è¨­ç‚ºç©ºå€¼
                    }
                    generateSchedule(); // æ›´æ–°é¡¯ç¤º
                });

                // ç›£è½è¼¸å…¥æ¡†è¼¸å…¥è®ŠåŒ–
                function updateCustomInput() {
                    let name = customInput.value.trim(); // å»é™¤ç©ºç™½
                    if (name.length > 3) {
                        alert("å§“åæœ€å¤šåªèƒ½è¼¸å…¥2-3å€‹å­—ï¼");
                        customInput.value = name.slice(0, 3); // æˆªæ–·æˆ 3 å€‹å­—
                    }

                    if (customInput.value.length < 2) {
                        customCheckbox.value = "";
                        customCheckbox.checked = false; // å–æ¶ˆå‹¾é¸
                    } else if (customInput.value.length >= 2 && customInput.value.length <= 3) {
                        customCheckbox.value = customInput.value; // è¨­å®š checkbox å€¼
                        customCheckbox.checked = true; // è‡ªå‹•å‹¾é¸
                    }
                    generateSchedule();
                }

                customInput.addEventListener("compositionend", updateCustomInput);
                customInput.addEventListener("input", function (e) {
                    if (!e.isComposing) {
                        updateCustomInput();
                    }
                });
                customInput.addEventListener("paste", function () {
                    setTimeout(updateCustomInput, 0); // ç¢ºä¿è²¼ä¸Šå¾Œå…§å®¹å·²æ›´æ–°
                });

                
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener("change", function() {
                        const checkedOptions = Array.from(checkboxes).filter(cb => cb.checked);

                        // æª¢æŸ¥é¸æ“‡çš„é …ç›®æ˜¯å¦è¶…éå…©å€‹
                        if (checkedOptions.length > 2) {
                            alert("ä¸€å€‹ç¯€æ¬¡æœ€å¤šåªèƒ½é¸æ“‡å…©ä½é†«å¸«ï¼");
                            this.checked = false; // å–æ¶ˆç•¶å‰é¸å–çš„é …ç›®
                        }
                        else {
                            generateSchedule(); // è‡ªå‹•æ›´æ–°å·¦å´é¡¯ç¤º
                        }
                    });
                });
            });
        });
    });

    // é‡è¨­è¡¨å–®å‡½æ•¸
    function resetForm() {
        // å–å¾—æ‰€æœ‰ checkbox å…ƒç´ 
        const checkboxes = document.querySelectorAll("input[type='checkbox']");

        // é‡è¨­æ¯å€‹ checkbox çš„é¸å–ç‹€æ…‹
        checkboxes.forEach(checkbox => {
            checkbox.checked = checkbox.defaultChecked; // å›åˆ°åŸå§‹çš„ checked ç‹€æ…‹
            if (checkbox.id.includes("custom-checkbox")) {
                checkbox.value = ""; // æ¸…ç©º custom checkbox çš„å€¼
            }
        });

        // å–å¾—æ‰€æœ‰ input å…ƒç´ 
        const inputs = document.querySelectorAll("input[type='text']");
        // æ¸…ç©ºæ¯å€‹ input
        inputs.forEach(input => {
            input.value = "";
            input.disabled = true; // è®“æ‰€æœ‰ custom input ä¹Ÿæ¢å¾©ç¦ç”¨
        });

        // é‡è¨­å¾Œè‡ªå‹•æ›´æ–°é¡¯ç¤º
        generateSchedule();
    }

    // æ¸…ç©ºè¡¨å–®å‡½æ•¸
    function clearForm() {
        const checkboxes = document.querySelectorAll("input[type='checkbox']");
        checkboxes.forEach(checkbox => {
            checkbox.checked = false; // å°‡æ‰€æœ‰ checkbox è¨­ç½®ç‚ºæœªé¸ä¸­
            if (checkbox.id.includes("custom-checkbox")) {
                checkbox.value = ""; // æ¸…ç©º custom checkbox çš„å€¼
            }
        });

        const inputs = document.querySelectorAll("input[type='text']");
        inputs.forEach(input => {
            input.value = "";
            input.disabled = true; // è®“æ‰€æœ‰ custom input ä¹Ÿæ¢å¾©ç¦ç”¨
        });

        // é‡è¨­å¾Œè‡ªå‹•æ›´æ–°é¡¯ç¤º
        generateSchedule();
    }

</script>

<!-- å¼•å…¥ html2canvas åº« -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>
</html>